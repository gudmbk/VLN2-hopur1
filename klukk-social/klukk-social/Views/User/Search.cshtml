@using klukk_social.Models
@model SearchViewModel

@{
    ViewBag.Title = "Search";
}

<h2 class="card searchpadd">Search</h2>

@foreach (var user in Model.Users)
{
    <div class="card searchcard searchpadd">
		@Html.ActionLink(user.User.FirstName, "Profile", new { userId = user.User.Id }, new { @class = "card", Title = @user.User.FullName })
        <a href='@Url.Action("Profile", "User", new {userId = user.User.Id}, null)'>
            <img src='@user.User.ProfilePic' class="search"/>
        </a>
		@if(user.IsFriends)
		{
			@Html.ActionLink("Vinur", "Profile", new { userId = user.User.Id }, new { @class = "btn btn-success btn-block whitepace" })
		}
		else if(user.HasUnansweredRequest)
		{
			@Html.ActionLink("Samþykkja vinabeiðni", "acceptFriendRequestFromSearch", new { newFriendId = user.User.Id, searchString = Model.searchString }, new { @class = "btn btn-success btn-block whitepace" })
		}
		else if(user.HasSentRequest)
		{
			@Html.ActionLink("Eyða vinabeiðni", "CancelFriendRequestFromSearch", new { newFriendId = user.User.Id, searchString = Model.searchString }, new { @class = "btn btn-danger btn-block whitepace" })
		}
		else
		{
			@Html.ActionLink("Senda vinabeiðni", "SendFriendRequest", new { newFriendId = user.User.Id, searchString = Model.searchString }, new { @class = "btn btn-warning btn-block whitepace" })
		}
    </div>
}
@foreach (var group in Model.Groups)
{
	<div class="cardgroup searchcard searchpadd">
		@Html.ActionLink(group.Group.Name, "Profile", "Group", new { groupId = group.Group.Id }, new { @class = "cardgroup" })
		<a href='@Url.Action("Profile", "Group", new { groupId = group.Group.Id }, null)'>
			<img src='@group.Group.ProfilePic' class="search" />
		</a>
		@if (group.IsMember) 
		{
			@Html.ActionLink("Meðlimur", "Profile", "Group", new { groupId = group.Group.Id }, new { @class = "btn btn-success btn-block whitepace", Title = "Opna síðu" })
		}
		else if(group.AskedForAccess)
		{
			@Html.ActionLink("Búið að sæja um", "DeleteGroupRequestFromSearch", "Group", new { groupId = group.Group.Id, searchString = Model.searchString }, new { @class = "btn btn-danger btn-block whitepace", Title = "Hætta við umsókn" })
		}
		else if(!group.Group.OpenGroup)
		{
			@Html.ActionLink("Læstur hópur", "SendGroupRequest", "Group", new { groupId = group.Group.Id, searchString = Model.searchString, fromSearch = "yes" }, new { @class = "btn btn-warning btn-block whitepace", Title = "Sækja um aðgang að hóp" })
		}
		else
		{
			@Html.ActionLink("Opinn hópur", "JoinOpenGroup", "Group", new { groupId = group.Group.Id, searchString = Model.searchString, fromSearch = "yes" }, new { @class = "btn btn-warning btn-block whitepace", Title = "Bæta við mína hópa" })
		}
		@*<button type="button" value="@user.Id" class="btn btn-success btn-block friend-req">Senda vinabeiðni</button>*@
	</div>
}
<div class="searchcard"></div> @*Lagar staðsetningu leitarniðurstaða með ósýnilegum spjöldum*@
<div class="searchcard"></div>
<div class="searchcard"></div>